<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday My Love!</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
     <style>

        
        .typewriter-container {
            background: #fff;
            border: 2px solid #d4af37;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            width: 100%;
            max-width: 1000px;
            padding: 30px;
            position: relative;
        }
        
        .typewriter-container::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border: 1px solid #d4af37;
            border-radius: 8px;
            pointer-events: none;
        }
        
        .typewriter-header {
            text-align: center;
            margin-bottom: 25px;
            color: #d4af37;
            font-size: 1.8rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .typewriter-paper {
            background: #fdf6e3;
            border: 1px solid #e8d8c0;
            border-radius: 5px;
            padding: 25px;
            min-height: 300px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
            position: relative;
        }
        
        .typewriter-paper::after {
            content: '';
            position: absolute;
            top: 0;
            left: 40px;
            right: 0;
            height: 100%;
            background: repeating-linear-gradient(
                transparent,
                transparent 23px,
                #e8d8c0 23px,
                #e8d8c0 24px
            );
            pointer-events: none;
            opacity: 0.3;
        }
        
        .love-note {
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            line-height: 24px;
            color: #5a3a2b;
            white-space: pre-wrap;
            word-wrap: break-word;
            position: relative;
            z-index: 1;
        }
        
        .typewriter-cursor {
            display: inline-block;
            background-color: #d4af37;
            width: 8px;
            height: 1.1rem;
            margin-left: 4px;
            animation: blink 1s infinite;
            vertical-align: middle;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        

        
        .typewriter-line {
            display: block;
            margin-bottom: 12px;
        }
        
        .signature {
            text-align: right;
            font-weight: bold;
            font-style: italic;
            margin-top: 20px;
            color: #d4af37;
        }

        /* New styles for the gift popup */
        .gift-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }
        
        .gift-popup.active {
            display: flex;
        }
        
        .gift-popup-content {
            background: #fff;
            border: 3px solid #d4af37;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .gift-popup-header {
            background: linear-gradient(45deg, #d4af37, #f5d76e);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #5a3a2b;
            font-weight: bold;
        }
        
        .gift-popup-close {
            cursor: pointer;
            font-size: 1.5rem;
            transition: transform 0.3s;
        }
        
        .gift-popup-close:hover {
            transform: rotate(90deg);
        }
        
        .gift-popup-body {
            padding: 0;
            overflow: hidden;
            flex-grow: 1;
        }
        
        .gift-letter-container {
            background: #fdf6e3;
            padding: 25px;
            max-height: 50vh;
            overflow-y: auto;
            border: 1px solid #e8d8c0;
            margin: 0;
            position: relative;
        }
        
        .gift-letter-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 40px;
            right: 0;
            height: 100%;
            background: repeating-linear-gradient(
                transparent,
                transparent 23px,
                #e8d8c0 23px,
                #e8d8c0 24px
            );
            pointer-events: none;
            opacity: 0.3;
            z-index: 0;
        }
        
        .gift-love-letter {
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            line-height: 24px;
            color: #5a3a2b;
            white-space: pre-wrap;
            position: relative;
            z-index: 1;
            margin: 0;
        }
        
        .gift-popup-audio {
            padding: 20px;
            background: #f9f9f9;
            border-top: 1px solid #e8d8c0;
            display: flex;
            justify-content: center;
        }
        
        .audio-player {
            width: 100%;
            max-width: 400px;
        }
        
        .audio-player audio {
            width: 100%;
        }
        
        .audio-caption {
            text-align: center;
            margin-top: 10px;
            font-style: italic;
            color: #5a3a2b;
            font-size: 0.9rem;
        }
        
        /* Custom scrollbar for the letter */
        .gift-letter-container::-webkit-scrollbar {
            width: 8px;
        }
        
        .gift-letter-container::-webkit-scrollbar-track {
            background: #f1e1c6;
            border-radius: 4px;
        }
        
        .gift-letter-container::-webkit-scrollbar-thumb {
            background: #d4af37;
            border-radius: 4px;
        }
        
        .gift-letter-container::-webkit-scrollbar-thumb:hover {
            background: #c19b2e;
        }

        
    </style>
</head>
<body>
    <!-- Cursor effect -->
    <div class="cursor-effect" id="cursor-effect"></div>
    
    <!-- Falling hearts background -->
    <div id="hearts-container"></div>

        <!-- Gift popup - MOVED TO TOP LEVEL -->
    <div class="gift-popup" id="gift-popup">
        <div class="gift-popup-content">
            <div class="gift-popup-header">
                <h3>A Special Love Letter For You</h3>
                <span class="gift-popup-close" id="gift-popup-close">
                    <i class="fas fa-times"></i>
                </span>
            </div>
            <div class="gift-popup-body">
                <div class="gift-letter-container">
                    <p class="gift-love-letter" id="gift-love-letter">
My Dearest Olwethu,

On this special day, I want to express what my heart feels but words often fail to capture.

From the moment you came into my life, everything changed. Your smile became my sunshine, your laughter my favorite melody, and your love the very air I breathe.

You are the most amazing person I've ever known - kind, beautiful, intelligent, and with a heart so pure it inspires me to be a better man every single day.

Thank you for:
- The way you look at me like I'm the only person in the room
- Your patience when I'm being difficult
- Your support in all my dreams and ambitions
- The little notes you leave me when I least expect them
- Your incredible strength that amazes me constantly

I cherish every moment we've shared - from our 1st meeting, from our deep conversations to our comfortable silences.

Today, on your birthday, I want to promise you that I will spend every day making you as happy as you've made me. You deserve the world, and I will move mountains to give it to you.

Happy birthday to the woman of my dreams, my best friend, my everything. May this year bring you as much joy as you've brought into my life.

With all my love, now and forever,
Nkateko
                    </p>
                </div>
            </div>
            <div class="gift-popup-audio">
                <div class="audio-player">
                    <audio controls id="love-letter-audio">
                        <source src="soundrec/For my love.mp3" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                    <p class="audio-caption">Listen to me read this letter to you</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <header>
            <h1>Happy Birthday, <span id="her-name">My Love</span>! üéÇ</h1>
            <p>This page is dedicated to the most amazing person in my life</p>
        </header>
        
        <main>
            
            <section id="message">
                
                <h2 >To My Beautiful Girlfriend</h2>
                <div class="typewriter-paper">
                    <div class="love-note" id="typewriter-output"></div>
                </div>
                <button class="interactive-btn" id="love-btn">Send Love üíñ</button>
                 </div>
            </section>
       
            
            <section id="photos">
                <h2>Photo Gallery</h2>
                <div class="media-gallery" id="interactive-gallery">
                    <!-- Photo items -->
                    <div class="media-item" data-type="image" data-src="images/IMG-20231229-WA0011.jpg" data-caption="December holidays">
                        <img src="images/IMG-20231229-WA0011.jpg" alt="Memory 1" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-image"></i>
                            <span>Photo</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="image" data-src="images/IMG-20241226-WA0013.jpg" data-caption="December holidays">
                        <img src="images/IMG-20241226-WA0013.jpg" alt="Memory 2" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-image"></i>
                            <span>Photo</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="image" data-src="images/IMG-20241226-WA0016.jpg" data-caption="December holidays">
                        <img src="images/IMG-20241226-WA0016.jpg" alt="Memory 3" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-image"></i>
                            <span>Photo</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="image" data-src="images/IMG-20241226-WA0022.jpg" data-caption="December holidays">
                        <img src="images/IMG-20241226-WA0022.jpg" alt="Memory 4" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-image"></i>
                            <span>Photo</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="image" data-src="images/IMG-20241226-WA0011.jpg" data-caption="1st Pic you ever sent me">
                        <img src="images/IMG-20241226-WA0011.jpg" alt="Memory 5" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-image"></i>
                            <span>Photo</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="image" data-src="images/IMG_20241001_105515.jpg" data-caption="Hot mammie at the mall">
                        <img src="images/IMG_20241001_105515.jpg" alt="Memory 6" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-image"></i>
                            <span>Photo</span>
                        </div>
                    </div>

                    <div class="media-item" data-type="image" data-src="images/IMG-20251019-WA0001.jpg" data-caption="Yesterday looking fire">
                        <img src="images/IMG-20251019-WA0001.jpg" alt="Memory 7" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-image"></i>
                            <span>Photo</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="image" data-src="images/IMG-20251019-WA0006.jpg" data-caption="Yesterday looking fire">
                        <img src="images/IMG-20251019-WA0006.jpg" alt="Memory 8" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-image"></i>
                            <span>Photo</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="image" data-src="images/IMG-20251019-WA0010.jpg" data-caption="Yesterday looking fire">
                        <img src="images/IMG-20251019-WA0010.jpg" alt="Memory 9" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-image"></i>
                            <span>Photo</span>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="videos">
                <h2>Video Collection</h2>
                <div class="media-gallery">
                    <!-- Video items -->
                    <div class="media-item" data-type="video" data-src="videos/19d589564bf54910bfaad73884797b66.mp4" data-caption="Drunk">
                        <img src="videos/o-11.png" alt="Video 1" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-video"></i>
                            <span>Video</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="video" data-src="videos/f7bb17c8ef91477cb6c595b513da9567.mp4" data-caption="I lay my head on my p...">
                        <img src="videos/o-13.png" alt="Video 2" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-video"></i>
                            <span>Video</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="video" data-src="videos/VID_24100622_185454_753.mp4" data-caption="BAE Cation">
                        <img src="videos/Screenshot_20250104_180553_com.huawei.himovie.overseas.jpg" alt="Video 3" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-video"></i>
                            <span>Video</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="video" data-src="videos/44a03bc526ff43ec912cc611812e259e.mp4" data-caption="Ke mo rata ha kana...">
                        <img src="videos/o-12.png" alt="Video 4" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-video"></i>
                            <span>Video</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="video" data-src="videos/VID-20241225-WA0011.mp4" data-caption="December holidays">
                        <img src="videos/o-14.png" alt="Video 5" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-video"></i>
                            <span>Video</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="video" data-src="videos/VID_24110423_074329_853.mp4" data-caption="BAE Cation">
                        <img src="videos/Screenshot_20250104_180601_com.huawei.himovie.overseas.jpg" alt="Video 6" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-video"></i>
                            <span>Video</span>
                        </div>
                    </div>

                    <div class="media-item" data-type="video" data-src="videos/VID-20250922-WA0024.mp4" data-caption="Feelin hot after school">
                        <img src="videos/Screenshot_20251019_211918_com.huawei.himovie.overseas.jpg" alt="Video 4" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-video"></i>
                            <span>Video</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="video" data-src="videos/VID-20250922-WA0018.mp4" data-caption="Feelin hot after school">
                        <img src="videos/Screenshot_20251019_211858_com.huawei.himovie.overseas.jpg" alt="Video 5" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-video"></i>
                            <span>Video</span>
                        </div>
                    </div>
                    
                    <div class="media-item" data-type="video" data-src="videos/VID-20250913-WA0009.mp4" data-caption="Feelin hot after school">
                        <img src="videos/Screenshot_20251019_211756_com.huawei.himovie.overseas.jpg" alt="Video 6" onerror="handleImageError(this)">
                        <div class="media-type-indicator">
                            <i class="fas fa-video"></i>
                            <span>Video</span>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Updated Quiz Section -->
    <section id="quiz">
        <h2>How Well Do You Know Our Love Story?</h2>
        
        <div class="quiz-container">
            <div class="quiz-question">1. Where did we first meet?</div>
            <div class="quiz-options">
                <div class="quiz-option" data-correct="false">University</div>
                <div class="quiz-option" data-correct="false">Coffee Shop</div>
                <div class="quiz-option" data-correct="true">Tlhabane</div>
                <div class="quiz-option" data-correct="false">Concert</div>
            </div>
        </div>
        
        <div class="quiz-container">
            <div class="quiz-question">2. What was the color of my shirt when we met?</div>
            <div class="quiz-options">
                <div class="quiz-option" data-correct="false">Blue</div>
                <div class="quiz-option" data-correct="false">Black</div>
                <div class="quiz-option" data-correct="true">White</div>
                <div class="quiz-option" data-correct="false">Red</div>
            </div>
        </div>
        
        <div class="quiz-container">
            <div class="quiz-question">3. When did I fall in love with you?</div>
            <div class="quiz-options">
                <div class="quiz-option" data-correct="true">February 2024</div>
                <div class="quiz-option" data-correct="false">March 2024</div>
                <div class="quiz-option" data-correct="false">April 2024</div>
                <div class="quiz-option" data-correct="false">May 2024</div>
            </div>
        </div>
        
        <div class="quiz-container">
            <div class="quiz-question">4. When did you know you were in love with me?</div>
            <div class="quiz-options">
                <div class="quiz-option" data-correct="false">February 2024</div>
                <div class="quiz-option" data-correct="true">March 2024</div>
                <div class="quiz-option" data-correct="false">April 2024</div>
                <div class="quiz-option" data-correct="false">May 2024</div>
            </div>
        </div>
        
        <button class="interactive-btn" id="submit-quiz">Check Your Answers</button>
        
        <div class="quiz-results" id="quiz-results" style="display: none;">
            <div class="quiz-score" id="quiz-score"></div>
            <div class="quiz-answers" id="quiz-answers"></div>
        </div>
    </section>
            
            <!-- Updated Decoder Section -->
    <section id="decoder">
        <h2>Secret Message Decoder</h2>
        <p>Decode this message by replacing each letter with the one that comes after it in the alphabet (A‚ÜíB, B‚ÜíC, Z‚ÜíA etc.)</p>
        <div class="decoder-container">
            <p class="decoder-instructions">Encoded message: <strong>H KNUD SGZS XNT ZQD ODSHSD ZMC SZKK ZMC RGNTKC MDUDQ CNTAS HS</strong></p>
            <input type="text" class="decoder-input" placeholder="Enter decoded message">
            <button class="interactive-btn" id="decode-btn">Decode</button>
            <div class="decoder-message" id="decoder-message">
                I love that you are petite and tall and you should never doubt it. üíñ
            </div>
        </div>
    </section>
            
            <section id="gift-section">
                             <!-- Gift box remains here, but popup has been moved -->
                <h2>Your Virtual Gift</h2>
                <div style="padding: 2rem;"></div>
                <div class="gift-box" id="gift-box">
                    <div class="lid"></div>
                    <div class="box"></div>
                </div>
            </section>

            <section id="memories">
                <h2>Our Memories Timeline</h2>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3>First Meeting</h3>
                            <p>The day we first met. I knew right then you were special.</p>
                            <p class="timeline-date">December 26, 2023</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3>Getting to Know each other</h3>
                            <p>Through out Jan to May we grew closer to each other</p>
                            <p class="timeline-date">January to May, 2024</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3>2ND Meeting</h3>
                            <p>Seeing you again face to face was so amazing, just having to hold you in my arms.</p>
                            <p class="timeline-date">April, 2024</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3>Made it Official</h3>
                            <p>The day i forced you to make it official and you did but ka bogole.</p>
                            <p class="timeline-date">June 09, 2024</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3>3RD Meet</h3>
                            <p>Seeing you again was like heroin, didn't wanna leave. You were breath taking.</p>
                            <p class="timeline-date">January , 2025</p>
                        </div>
                    </div>
                     <div class="timeline-item">
                        <div class="timeline-content">
                            <h3>Today</h3>
                            <p>Celebrating you and another amazing year together!</p>
                            <p class="timeline-date">October 20, 2025</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="future-dreams">
                <h2>Our Future Dreams</h2>
                <div class="timeline future-timeline">
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3>Next Year</h3>
                            <p>Spend more time together</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3>In 5 Years</h3>
                            <p>Move in together</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3>In 8 Years</h3>
                            <p>Get Married</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3>In 10 Years</h3>
                            <p>Start a family</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <footer>
            <p>Made with ‚ù§Ô∏è for <span id="footer-name"> </span> the most special person in my life</p>
        </footer>
    </div>
    
    <!-- Music player -->
    <div class="music-player">
        <div class="music-info">Our Song</div>
        <button class="music-btn" id="play-btn"><i class="fas fa-play"></i></button>
        <button class="music-btn" id="next-btn"><i class="fas fa-forward"></i></button>
    </div>
    
    <!-- Modal for media display -->
    <div class="modal" id="mediaModal">
        <div class="modal-content">
            <div class="modal-close" id="modalClose">
                <i class="fas fa-times"></i>
            </div>
            <div id="modalMedia"></div>
            <div class="modal-nav">
                <div class="modal-nav-btn" id="modalPrev">
                    <i class="fas fa-chevron-left"></i>
                </div>
                <div class="modal-nav-btn" id="modalNext">
                    <i class="fas fa-chevron-right"></i>
                </div>
            </div>
            <div class="modal-caption" id="modalCaption"></div>
        </div>
    </div>

    <script>
        // Add this to your existing JavaScript
        
        // Gift popup functionality
        const giftPopup = document.getElementById('gift-popup');
        const giftPopupClose = document.getElementById('gift-popup-close');
        const loveLetterAudio = document.getElementById('love-letter-audio');
        const giftBox = document.getElementById('gift-box');
        
        // Open gift popup when gift box is clicked
        if (giftBox) {
            giftBox.addEventListener('click', function() {
                // Open the popup
                giftPopup.classList.add('active');
                
                // Add the open class to the gift box for animation
                this.classList.add('open');
                
                // Start playing the audio automatically (optional)
                // loveLetterAudio.play().catch(e => {
                //     console.log("Autoplay prevented: ", e);
                // });
                
                // Create confetti
                createConfetti();
            });
        }
        
        // Close gift popup
        if (giftPopupClose) {
            giftPopupClose.addEventListener('click', function() {
                giftPopup.classList.remove('active');
                loveLetterAudio.pause();
                loveLetterAudio.currentTime = 0;
            });
        }
        
        // Close popup when clicking outside content
        giftPopup.addEventListener('click', function(e) {
            if (e.target === giftPopup) {
                giftPopup.classList.remove('active');
                loveLetterAudio.pause();
                loveLetterAudio.currentTime = 0;
            }
        });
        
        // Close popup with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && giftPopup.classList.contains('active')) {
                giftPopup.classList.remove('active');
                loveLetterAudio.pause();
                loveLetterAudio.currentTime = 0;
            }
        });
    </script>

     <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loveNote = [
                "On your special day, I want you to know how incredibly blessed I am to have you in my life.",
                "Your smile lights up my world, your laughter is my favorite melody, and your love is the greatest gift I've ever received.",
                "Thank you for being you - kind, beautiful, and wonderfully unique. I look forward to celebrating many more birthdays with you!",
                "With all my love,",
                "Nkateko",
                "‚ù§Ô∏è"
            ];
            
            const outputElement = document.getElementById('typewriter-output');
            const loveBtn = document.getElementById('love-btn');
            let currentLine = 0;
            let currentText = '';
            let isDeleting = false;
            let isWaiting = false;
            
            // Typewriter effect function
            function typeWriter() {
                if (currentLine >= loveNote.length) {
                    // Add blinking cursor at the end
                    outputElement.innerHTML += '<span class="typewriter-cursor"></span>';
                    loveBtn.disabled = false;
                    return;
                }
                
                const currentLineText = loveNote[currentLine];
                
                if (!isDeleting && !isWaiting) {
                    // Typing forward
                    currentText = currentLineText.substring(0, currentText.length + 1);
                } else if (isDeleting && !isWaiting) {
                    // Deleting
                    currentText = currentLineText.substring(0, currentText.length - 1);
                }
                
                // Display the current text with cursor
                if (currentLine === loveNote.length - 1) {
                    // Last line (signature) gets special styling
                    outputElement.innerHTML = formatLines() + 
                        '<div class="signature">' + currentText + 
                        '<span class="typewriter-cursor"></span></div>';
                } else {
                    outputElement.innerHTML = formatLines() + currentText + 
                        '<span class="typewriter-cursor"></span>';
                }
                
                // Typing speed
                let typeSpeed = 60;
                
                if (isDeleting) {
                    typeSpeed /= 2; // Delete faster
                }
                
                // Check if current line is complete
                if (!isDeleting && currentText === currentLineText) {
                    isWaiting = true;
                    typeSpeed = 1000; // Pause at end of line
                    isDeleting = true;
                } else if (isDeleting && currentText === '') {
                    isDeleting = false;
                    currentLine++;
                    isWaiting = true;
                    typeSpeed = 500; // Pause before starting new line
                } else if (isWaiting) {
                    isWaiting = false;
                }
                
                setTimeout(typeWriter, typeSpeed);
            }
            
            // Format already completed lines
            function formatLines() {
                let formattedText = '';
                for (let i = 0; i < currentLine; i++) {
                    formattedText += '<div class="typewriter-line">' + loveNote[i] + '</div>';
                }
                return formattedText;
            }
            
            // Start typewriter effect
            typeWriter();
            
            // Button click event
            loveBtn.addEventListener('click', function() {
                // Reset animation
                currentLine = 0;
                currentText = '';
                isDeleting = false;
                isWaiting = false;
                outputElement.innerHTML = '';
                loveBtn.disabled = true;
                
                // Restart typewriter effect
                typeWriter();
            });
        });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="js/countdown.js"></script>
    <script>
// Add this confetti function at the top level
function createConfetti() {
    for (let i = 0; i < 50; i++) {
        setTimeout(() => {
            const confetti = document.createElement('div');
            confetti.innerHTML = 'üéä';
            confetti.style.position = 'fixed';
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.top = '-50px';
            confetti.style.fontSize = (Math.random() * 20 + 10) + 'px';
            confetti.style.zIndex = '9999';
            confetti.style.pointerEvents = 'none';
            confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
            
            document.body.appendChild(confetti);
            
            setTimeout(() => {
                confetti.remove();
            }, 5000);
        }, i * 20);
    }
}

// Add fall animation for confetti
const confettiStyle = document.createElement('style');
confettiStyle.textContent = `
    @keyframes fall {
        to {
            transform: translateY(100vh) rotate(${Math.random() * 360}deg);
            opacity: 0;
        }
    }
`;
document.head.appendChild(confettiStyle);
</script>

<script>
// SINGLE DOMContentLoaded event listener - remove all others
document.addEventListener('DOMContentLoaded', function() {
    // Personalized name
    const herName = "Olwethu";
    document.getElementById('her-name').textContent = herName;
    document.getElementById('footer-name').textContent = herName;
    
    // Create falling hearts animation
    function createHeart() {
        const heart = document.createElement('div');
        heart.innerHTML = '‚ù§Ô∏è';
        heart.classList.add('heart');
        heart.style.position = 'fixed';
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.top = '-50px';
        heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
        heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
        heart.style.zIndex = '9998';
        heart.style.pointerEvents = 'none';
        heart.style.animation = 'fall linear forwards';
        
        document.getElementById('hearts-container').appendChild(heart);
        
        setTimeout(() => {
            heart.remove();
        }, 10000);
    }
    
    // Add fall animation for hearts
    const heartStyle = document.createElement('style');
    heartStyle.textContent = `
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    `;
    document.head.appendChild(heartStyle);
    
    // Generate hearts periodically
    setInterval(createHeart, 300);
    
    // Interactive button
    document.getElementById('love-btn').addEventListener('click', function() {
        for (let i = 0; i < 20; i++) {
            setTimeout(createHeart, i * 100);
        }
        
        this.innerHTML = 'Love Sent! üíñ';
        this.style.background = 'linear-gradient(45deg, #4CAF50, #8BC34A)';
        
        setTimeout(() => {
            this.innerHTML = 'Send Love üíñ';
            this.style.background = 'linear-gradient(45deg, #ff4d94, #ff8eb4)';
        }, 2000);
    });
    
    // Interactive gallery - rearrange on click
    document.getElementById('interactive-gallery').addEventListener('click', function() {
        const items = Array.from(this.children);
        for (let i = items.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            this.appendChild(items[j]);
        }
    });
    
    // ========== QUIZ FUNCTIONALITY ==========
    const quizOptions = document.querySelectorAll('.quiz-option');
    const submitBtn = document.getElementById('submit-quiz');
    const quizResults = document.getElementById('quiz-results');
    const quizScore = document.getElementById('quiz-score');
    const quizAnswers = document.getElementById('quiz-answers');
    
    let selectedAnswers = {
        1: null,
        2: null,
        3: null,
        4: null
    };
    
    // Track selected answers
    quizOptions.forEach(option => {
        option.addEventListener('click', function() {
            const questionContainer = this.closest('.quiz-container');
            const questionNumber = Array.from(document.querySelectorAll('.quiz-container')).indexOf(questionContainer) + 1;
            
            // Remove selected class from all options in this question
            questionContainer.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            this.classList.add('selected');
            
            // Store the selected answer
            selectedAnswers[questionNumber] = {
                text: this.textContent,
                correct: this.getAttribute('data-correct') === 'true'
            };
        });
    });
    
    // Submit quiz
    if (submitBtn) {
        submitBtn.addEventListener('click', function() {
            let correctCount = 0;
            let answersHtml = '';
            
            // Check each question
            for (let i = 1; i <= 4; i++) {
                const answer = selectedAnswers[i];
                
                if (answer) {
                    if (answer.correct) {
                        correctCount++;
                        answersHtml += `<p>Question ${i}: <span style="color: #4CAF50;">‚úì Correct! (${answer.text})</span></p>`;
                    } else {
                        answersHtml += `<p>Question ${i}: <span style="color: #f44336;">‚úó Incorrect (You selected: ${answer.text})</span></p>`;
                    }
                } else {
                    answersHtml += `<p>Question ${i}: <span style="color: #ff9800;">Not answered</span></p>`;
                }
            }
            
            // Display results
            if (quizScore && quizAnswers) {
                quizScore.textContent = `You got ${correctCount} out of 4 correct!`;
                quizAnswers.innerHTML = answersHtml;
                quizResults.style.display = 'block';
                
                // Create confetti if all answers are correct
                if (correctCount === 4) {
                    createConfetti();
                }
                
                // Scroll to results
                quizResults.scrollIntoView({ behavior: 'smooth' });
            }
        });
    }
    
    // ========== DECODER FUNCTIONALITY ==========
    const decodeBtn = document.getElementById('decode-btn');
    if (decodeBtn) {
        decodeBtn.addEventListener('click', function() {
            const input = document.querySelector('.decoder-input');
            const message = document.getElementById('decoder-message');
            
            if (input && message) {
                const inputValue = input.value.toLowerCase();
                if (inputValue.includes("i love that you are petite and tall and you should never doubt it")) {
                    message.style.display = 'block';
                    createConfetti();
                } else {
                    alert("That's not quite right. Try again! Remember to replace each letter with the next one in the alphabet.");
                }
            }
        });
    }
    
    // Gift box functionality
    const giftBox = document.getElementById('gift-box');
    if (giftBox) {
        giftBox.addEventListener('click', function() {
            this.classList.add('open');
            createConfetti();
        });
    }
    
    // Cursor effect
    document.addEventListener('mousemove', function(e) {
        const cursor = document.getElementById('cursor-effect');
        if (!cursor) return;
        
        cursor.style.left = e.pageX + 'px';
        cursor.style.top = e.pageY + 'px';
    });
    
    // Music player functionality
    const songs = [
        {
            title: "Our Song",
            src: "music/Spoonky.mp3"
        },
        {
            title: "Special Memory",
            src: "music/song2.mp3"
        }
    ];
    
    let currentSong = 0;
    const audio = new Audio();
    
    document.getElementById('play-btn').addEventListener('click', function() {
        if (audio.paused) {
            audio.src = songs[currentSong].src;
            audio.play();
            this.innerHTML = '<i class="fas fa-pause"></i>';
            document.querySelector('.music-info').textContent = songs[currentSong].title;
        } else {
            audio.pause();
            this.innerHTML = '<i class="fas fa-play"></i>';
        }
    });
    
    document.getElementById('next-btn').addEventListener('click', function() {
        currentSong = (currentSong + 1) % songs.length;
        audio.src = songs[currentSong].src;
        audio.play();
        document.getElementById('play-btn').innerHTML = '<i class="fas fa-pause"></i>';
        document.querySelector('.music-info').textContent = songs[currentSong].title;
    });
    
    // Image error handling
    window.handleImageError = function(img) {
        img.src = "https://images.unsplash.com/photo-1533158307587-828f0a76ef46?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80";
        img.alt = "Image not available";
    }

    // Modal functionality
            const mediaItems = document.querySelectorAll('.media-item');
            const modal = document.getElementById('mediaModal');
            const modalMedia = document.getElementById('modalMedia');
            const modalCaption = document.getElementById('modalCaption');
            const modalClose = document.getElementById('modalClose');
            const modalPrev = document.getElementById('modalPrev');
            const modalNext = document.getElementById('modalNext');
            
            let currentMediaIndex = 0;
            let mediaArray = Array.from(mediaItems);
            
            // Initialize media array and event listeners
            mediaItems.forEach((item, index) => {
                item.addEventListener('click', () => {
                    currentMediaIndex = index;
                    openModal();
                });
            });
            
            // Open modal function
            function openModal() {
                const mediaItem = mediaArray[currentMediaIndex];
                const mediaType = mediaItem.getAttribute('data-type');
                const mediaSrc = mediaItem.getAttribute('data-src');
                const caption = mediaItem.getAttribute('data-caption');
                
                // Clear previous media
                modalMedia.innerHTML = '';
                
                // Add appropriate media type
                if (mediaType === 'image') {
                    modalMedia.innerHTML = `<img src="${mediaSrc}" alt="Enlarged view" style="max-width: 100%; max-height: 80vh;">`;
                } else if (mediaType === 'video') {
                    modalMedia.innerHTML = `<video controls autoplay style="max-width: 100%; max-height: 80vh;"><source src="${mediaSrc}" type="video/mp4">Your browser does not support the video tag.</video>`;
                }
                
                // Set caption
                modalCaption.textContent = caption;
                
                // Show modal
                modal.classList.add('active');

                 // NEW: Scroll to top of modal to ensure content is visible
        modal.scrollTop = 0;
        
// Scroll to the middle of the page 800
window.scrollTo({
    top: (document.documentElement.scrollHeight / 2) - 800,
    behavior: 'smooth' // optional for smooth scrolling
});
                
                // Prevent body scrolling
                //document.body.style.overflow = 'hidden';
            }
            
            // Close modal function
            function closeModal() {
                modal.classList.remove('active');
                
                // Allow body scrolling
                document.body.style.overflow = 'auto';
                
                // Pause any videos
                const video = modalMedia.querySelector('video');
                if (video) {
                    video.pause();
                }

                // Scroll to the middle of the page
                if(video){
                    window.scrollTo({
                    top: 1800,
                    behavior: 'smooth' // optional for smooth scrolling 1500
                });
                } else{
                    window.scrollTo({
                    top: 1000,
                    behavior: 'smooth' // optional for smooth scrolling 800
                });
                }
                
            }
            
            // Navigate to next media
            function nextMedia() {
                currentMediaIndex = (currentMediaIndex + 1) % mediaArray.length;
                openModal();
            }
            
            // Navigate to previous media
            function prevMedia() {
                currentMediaIndex = (currentMediaIndex - 1 + mediaArray.length) % mediaArray.length;
                openModal();
            }
            
            // Event listeners for modal controls
            modalClose.addEventListener('click', closeModal);
            modalNext.addEventListener('click', nextMedia);
            modalPrev.addEventListener('click', prevMedia);
            
            // Close modal when clicking outside content
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (modal.classList.contains('active')) {
                    if (e.key === 'Escape') {
                        closeModal();
                    } else if (e.key === 'ArrowRight') {
                        nextMedia();
                    } else if (e.key === 'ArrowLeft') {
                        prevMedia();
                    }
                }
            });
});
</script>
<style>
    /* Add selected state for quiz options */
    .quiz-option.selected {
        background: rgba(255, 215, 0, 0.3) !important;
        border: 2px solid #ffd700 !important;
        transform: scale(1.05);
        box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        transition: all 0.3s ease;
    }

    /* Optional: Add hover effect for better UX */
    .quiz-option:hover {
        background: rgba(255, 255, 255, 0.2) !important;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    /* Add correct/incorrect states for when quiz is submitted */
    .quiz-option.correct-answer {
        background: rgba(76, 175, 80, 0.4) !important;
        border: 2px solid #4CAF50 !important;
    }

    .quiz-option.incorrect-answer {
        background: rgba(244, 67, 54, 0.4) !important;
        border: 2px solid #f44336 !important;
    }
</style>
</body>
</html>